{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\young\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Rmit_campus_map\\\\frontend\\\\src\\\\GeoJSONMap.js\",\n  _s = $RefreshSig$();\n// GeoJSONMap.js\nimport React, { useEffect, useRef } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport \"GeoJSONMap.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction GeoJSONMap() {\n  _s();\n  const mapRef = useRef(null);\n  const drawnItems = useRef(null);\n  useEffect(() => {\n    if (!mapRef.current) {\n      const imageBounds = [[37.775, -122.42], [37.776, -122.418]]; // 위아래 반전\n\n      const map = L.map(\"map\", {\n        center: [(imageBounds[0][0] + imageBounds[1][0]) / 2, (imageBounds[0][1] + imageBounds[1][1]) / 2],\n        zoom: 18,\n        maxZoom: 50,\n        minZoom: 12,\n        crs: L.CRS.Simple\n      });\n      L.imageOverlay(\"images/class1.jpg\", imageBounds).addTo(map);\n      map.setMaxBounds(imageBounds);\n      L.control.zoom({\n        position: \"topright\"\n      }).addTo(map);\n      drawnItems.current = new L.FeatureGroup();\n      map.addLayer(drawnItems.current);\n      const drawControl = new L.Control.Draw({\n        edit: {\n          featureGroup: drawnItems.current,\n          poly: {\n            allowIntersection: false\n          }\n        },\n        draw: {\n          polygon: {\n            allowIntersection: false,\n            showArea: true\n          },\n          circle: false,\n          rectangle: false,\n          marker: false,\n          polyline: false\n        }\n      });\n      map.addControl(drawControl);\n      map.on(L.Draw.Event.CREATED, event => {\n        const layer = event.layer;\n        drawnItems.current.addLayer(layer);\n        savePolygonToLocalStorage();\n      });\n      loadPolygonFromLocalStorage();\n      mapRef.current = map;\n    }\n  }, []);\n  const savePolygonToLocalStorage = () => {\n    const geoJson = drawnItems.current.toGeoJSON();\n    const geoJsonString = JSON.stringify(geoJson);\n    localStorage.setItem(\"savedPolygon\", geoJsonString);\n  };\n  const loadPolygonFromLocalStorage = () => {\n    const savedPolygonString = localStorage.getItem(\"savedPolygon\");\n    if (savedPolygonString) {\n      const savedPolygon = JSON.parse(savedPolygonString);\n      L.geoJSON(savedPolygon).addTo(mapRef.current);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(GeoJSONMap, \"1Ytz2Uzsxv68ai9tuLcWsLQTlGc=\");\n_c = GeoJSONMap;\nexport default GeoJSONMap;\nvar _c;\n$RefreshReg$(_c, \"GeoJSONMap\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","GeoJSONMap","_s","mapRef","drawnItems","current","imageBounds","map","center","zoom","maxZoom","minZoom","crs","CRS","Simple","imageOverlay","addTo","setMaxBounds","control","position","FeatureGroup","addLayer","drawControl","Control","Draw","edit","featureGroup","poly","allowIntersection","draw","polygon","showArea","circle","rectangle","marker","polyline","addControl","on","Event","CREATED","event","layer","savePolygonToLocalStorage","loadPolygonFromLocalStorage","geoJson","toGeoJSON","geoJsonString","JSON","stringify","localStorage","setItem","savedPolygonString","getItem","savedPolygon","parse","geoJSON","id","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/young/OneDrive/바탕 화면/Rmit_campus_map/frontend/src/GeoJSONMap.js"],"sourcesContent":["// GeoJSONMap.js\nimport React, { useEffect, useRef } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport \"GeoJSONMap.css\";\n\n\nfunction GeoJSONMap() {\n  const mapRef = useRef(null);\n  const drawnItems = useRef(null);\n\n  useEffect(() => {\n    if (!mapRef.current) {\n      const imageBounds = [[37.775, -122.42], [37.776, -122.418]]; // 위아래 반전\n\n      const map = L.map(\"map\", {\n        center: [\n          (imageBounds[0][0] + imageBounds[1][0]) / 2,\n          (imageBounds[0][1] + imageBounds[1][1]) / 2,\n        ],\n        zoom: 18,\n        maxZoom: 50,\n        minZoom: 12,\n        crs: L.CRS.Simple,\n      });\n\n      L.imageOverlay(\"images/class1.jpg\", imageBounds).addTo(map);\n\n      map.setMaxBounds(imageBounds);\n\n      L.control.zoom({ position: \"topright\" }).addTo(map);\n\n      drawnItems.current = new L.FeatureGroup();\n      map.addLayer(drawnItems.current);\n\n      const drawControl = new L.Control.Draw({\n        edit: {\n          featureGroup: drawnItems.current,\n          poly: {\n            allowIntersection: false,\n          },\n        },\n        draw: {\n          polygon: {\n            allowIntersection: false,\n            showArea: true,\n          },\n          circle: false,\n          rectangle: false,\n          marker: false,\n          polyline: false,\n        },\n      });\n      map.addControl(drawControl);\n\n      map.on(L.Draw.Event.CREATED, (event) => {\n        const layer = event.layer;\n        drawnItems.current.addLayer(layer);\n        savePolygonToLocalStorage();\n      });\n\n      loadPolygonFromLocalStorage();\n\n      mapRef.current = map;\n    }\n  }, []);\n\n  const savePolygonToLocalStorage = () => {\n    const geoJson = drawnItems.current.toGeoJSON();\n    const geoJsonString = JSON.stringify(geoJson);\n    localStorage.setItem(\"savedPolygon\", geoJsonString);\n  };\n\n  const loadPolygonFromLocalStorage = () => {\n    const savedPolygonString = localStorage.getItem(\"savedPolygon\");\n    if (savedPolygonString) {\n      const savedPolygon = JSON.parse(savedPolygonString);\n      L.geoJSON(savedPolygon).addTo(mapRef.current);\n    }\n  };\n\n  return (\n    <div id=\"map-container\">\n      <div id=\"map\"></div>\n    </div>\n  );\n}\n\nexport default GeoJSONMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}